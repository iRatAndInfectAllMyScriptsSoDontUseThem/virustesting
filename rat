task.wait(6)
local TeleportService = game:GetService("TeleportService")
local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")
local player = Players.LocalPlayer
local PlaceId = game.PlaceId
local request = syn and syn.request or http_request or request
assert(request, "No HTTP request function available")
local exec = false

local function ServerHop()
    while true do
        local JobId = game.JobId
        local servers = {}
        local cursor = ""

        repeat
            local url = "https://games.roblox.com/v1/games/" .. PlaceId ..
                        "/servers/Public?sortOrder=Asc&limit=100" ..
                        (cursor ~= "" and "&cursor=" .. cursor or "")

            local response = request({ Url = url, Method = "GET" })
            local data
            local ok = pcall(function()
                data = HttpService:JSONDecode(response and response.Body or "{}")
            end)

            if ok and type(data) == "table" and data.data then
                for _, server in pairs(data.data) do
                    if server.id ~= JobId and server.playing < server.maxPlayers then
                        table.insert(servers, server.id)
                    end
                end
                cursor = data.nextPageCursor
            else
                cursor = nil
            end
        until cursor == nil or #servers > 0

        if #servers > 0 then
            TeleportService:TeleportToPlaceInstance(
                PlaceId,
                servers[math.random(1, #servers)],
                player
            )
            break
        end

        if not exec then
            exec = true
            loadstring(game:HttpGet("https://raw.githubusercontent.com/Chris12089/atlasbss/main/script.lua"))()
        end

        task.wait(0.067)
    end
end

local monstersfolder = workspace:WaitForChild("Monsters")
local bee = nil

for _, vic in ipairs(monstersfolder:GetChildren()) do
    if vic.Name:match("^Vicious Bee") then
        bee = vic
        break
    end
end

if bee then
    loadstring(game:HttpGet("https://raw.githubusercontent.com/Chris12089/atlasbss/main/script.lua"))()
    repeat
        print("there")
        task.wait(1)
    until not bee or not bee.Parent
    ServerHop()
else
    ServerHop()
end
